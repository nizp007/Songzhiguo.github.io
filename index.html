<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
    <style type="text/css">
        #scroll{
            width: 50px;
            height: 500px;
            background: gray;
            position: relative;
            display: none;
        }
        #scroll span{
            width: 50px;
            background: blue;
            position: absolute;

        }
        #box{
            width: 500px;
            height: 500px;
            border: 1px solid black;
            position: absolute;
            left: 68px;
            top: 8px;
            overflow: hidden;
        }
        #content{
            position: absolute;
            left: 0;
            top: 0;
        }
    </style>
</head>
<body>

<div id="scroll">
    <span id="span"></span>
</div>
<div id="box">
    <div id="content">
        北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,
        北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,
        北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,
        您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,
        北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,
        北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,
        您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,
        北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,
        北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,
        您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,
        北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,北京欢迎您,


    </div>
</div>
<!--
    需求：
        1：滚动条（当内容超过可视区的时候出现滚动条，
        并且内容越多滚动条越小）
        2：鼠标滚轮之后滚动内容；
        3：点击滚动条下移，上移动；
        要求：绑定事件用事件绑定来做;
-->
<script type="text/javascript">
    var scroll = document.getElementById('scroll');
    var span = document.getElementById('span');
    var box = document.getElementById('box');
    var content = document.getElementById('content');
    //滚轮函数
    function addmousewheel(obj,fnUp,fnDown) {
        obj.onmousewheel = fn;
        obj.addEventListener('DOMMouseScroll',fn);
        function fn(ev) {
            var onOff = null;
            if (ev.wheelDelta){
                //chrome
                onOff = ev.wheelDelta>0?true:false;
            }else {
                //fireFox
                onOff = ev.detail<0?true:false;
            }
            if (onOff){
                if (typeof fnUp == 'function'){
                    fnUp && fnUp();
                }
            }else {
                if (typeof fnUp == 'function'){
                    fnDown && fnDown();
                }
            }
            ev.preventDefault();
        }
    }
    var boxH = box.offsetHeight;
    var contentH = content.scrollHeight;
    if (boxH < contentH){
        scroll.style.display = 'block';
        var scaleBar = (boxH/contentH).toFixed(1)*1;
        var scrollH = scroll.offsetHeight;
        span.style.height = scrollH*scaleBar + 'px';
    }
    //拖拽
    span.addEventListener('mousedown',fnDown);
    function fnDown(ev) {
        var disY = ev.pageY - span.offsetTop;
        document.addEventListener('mousemove',fnMove);
        document.addEventListener('mouseup',fnUp);
        function fnUp() {
            document.removeEventListener('mousemove',fnMove);
            document.removeEventListener('mouseup',fnUp);
        }
        function fnMove(ev){
            var t = ev.pageY - disY;
            if(t < 0){
                t = 0;
            }else if(t > scrollH-span.offsetHeight){
                t = scrollH-span.offsetHeight;
            }
            span.style.top = t + 'px';
            var scale = t/(scrollH-span.offsetHeight);
            content.style.top = scale * (boxH-contentH) + 'px';
        }
        ev.preventDefault();
    }
    var spanT = span.offsetTop;
    addmousewheel(box,function () {
        spanT-=5;
        if(spanT < 0){
            spanT = 0;
        }else if(spanT > scrollH-span.offsetHeight){
            spanT = scrollH-span.offsetHeight;
        }
        span.style.top = spanT + 'px';
        var scale = spanT/(scrollH-span.offsetHeight);
        content.style.top = scale * (boxH-contentH) + 'px';
    },function () {
        spanT+=5;
        if(spanT < 0){
            spanT = 0;
        }else if(spanT > scrollH-span.offsetHeight){
            spanT = scrollH-span.offsetHeight;
        }
        span.style.top = spanT + 'px';
        var scale = spanT/(scrollH-span.offsetHeight);
        content.style.top = scale * (boxH-contentH) + 'px';
    });
    var timer = null;
    //点击的时候移动
    scroll.addEventListener('mousedown',function(ev){
        timer = setInterval(function(){
            var y = ev.pageY;
            var t = span.offsetTop;
            if(y < t){
                t-=8;
            }else if(y > t+span.offsetHeight){
                t+=10;
            }else{
                clearInterval(timer);
            }
            if(t < 0){
                t = 0;
            }else if(t > scrollH-span.offsetHeight){
                t = scrollH-span.offsetHeight;
            }
            span.style.top = t + 'px';
            var scale = t/(scrollH-span.offsetHeight);
            content.style.top = scale * (boxH-contentH) + 'px';
        },30);
    });
    scroll.addEventListener('mouseup',function(){
        clearInterval(timer);
    });



</script>
</body>
</html>
